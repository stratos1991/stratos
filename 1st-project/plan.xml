<?xml version="1.0" encoding="UTF-8"?>
<plan>
  <title>Vite PWA with React Hook Form, MUI, and localStorage</title>
  <description>
    Create a Progressive Web App using Vite, React, TypeScript, Material-UI (MUI),
    and react-hook-form that includes an input form which persists data to
    localStorage for offline-capable storage. Features a modern, responsive UI
    with professional Material Design components.
  </description>

  <phase name="Project Setup">
    <step order="1">
      <action>Initialize Vite project with React and TypeScript</action>
      <command>npm create vite@latest . -- --template react-ts</command>
      <notes>Use React with TypeScript for type safety and better DX</notes>
    </step>
    <step order="2">
      <action>Install dependencies</action>
      <command>npm install</command>
    </step>
    <step order="3">
      <action>Install PWA plugin for Vite</action>
      <command>npm install -D vite-plugin-pwa</command>
    </step>
    <step order="4">
      <action>Install Material-UI (MUI) dependencies</action>
      <command>npm install @mui/material @emotion/react @emotion/styled @mui/icons-material</command>
    </step>
    <step order="5">
      <action>Install react-hook-form</action>
      <command>npm install react-hook-form</command>
    </step>
  </phase>

  <phase name="PWA Configuration">
    <step order="1">
      <action>Configure vite.config.ts with PWA plugin</action>
      <file>vite.config.ts</file>
      <details>
        - Import VitePWA from 'vite-plugin-pwa'
        - Add VitePWA plugin with manifest configuration
        - Set registerType to 'autoUpdate'
        - Configure workbox for caching strategies
        - Define manifest with app name, icons, theme colors
      </details>
    </step>
    <step order="2">
      <action>Create PWA icons</action>
      <details>
        - Create 192x192 icon (pwa-192x192.png)
        - Create 512x512 icon (pwa-512x512.png)
        - Place in public/ directory
      </details>
    </step>
    <step order="3">
      <action>Update index.html with PWA meta tags</action>
      <file>index.html</file>
      <details>
        - Add theme-color meta tag
        - Add apple-mobile-web-app-capable meta tag
        - Add viewport meta tag for mobile
      </details>
    </step>
  </phase>

  <phase name="LocalStorage Service">
    <step order="1">
      <action>Create localStorage service layer</action>
      <file>src/services/storage.ts</file>
      <details>
        - Define TypeScript interface for form data
        - Create function to save form submission to localStorage
        - Create function to retrieve all submissions
        - Create function to delete a submission
        - Create function to clear all submissions
        - Generate unique IDs for each submission (use Date.now)
        - Add timestamp to each submission
      </details>
      <example>
        interface FormSubmission {
          id: string;
          name: string;
          email: string;
          message: string;
          createdAt: string;
        }

        const STORAGE_KEY = 'form_submissions';

        export function saveSubmission(data: Omit&lt;FormSubmission, 'id' | 'createdAt'&gt;): FormSubmission
        export function getSubmissions(): FormSubmission[]
        export function deleteSubmission(id: string): void
        export function clearSubmissions(): void
      </example>
    </step>
  </phase>

  <phase name="MUI Theme Setup">
    <step order="1">
      <action>Create MUI theme configuration</action>
      <file>src/theme/theme.ts</file>
      <details>
        - Import createTheme from @mui/material
        - Define custom theme with colors, typography
        - Export theme for use in main.tsx
      </details>
    </step>
    <step order="2">
      <action>Wrap app with ThemeProvider</action>
      <file>src/main.tsx</file>
      <details>
        - Import ThemeProvider and CssBaseline from MUI
        - Import custom theme
        - Wrap App component with ThemeProvider
        - Add CssBaseline for consistent baseline styles
      </details>
    </step>
  </phase>

  <phase name="Form Component">
    <step order="1">
      <action>Create form component with react-hook-form and MUI</action>
      <file>src/components/InputForm.tsx</file>
      <details>
        - Import useForm from react-hook-form
        - Import MUI components: TextField, Button, Box, Alert, Paper
        - Use useForm hook with TypeScript types
        - Define validation rules using react-hook-form
        - Include input fields: name (required), email (required + pattern), message (required)
        - Use MUI TextField with error states from react-hook-form
        - Use MUI Button for submit
        - Show MUI Alert for success message after submission
        - Reset form using react-hook-form reset() after successful submission
      </details>
      <example>
        import { useForm } from 'react-hook-form';
        import { TextField, Button, Box, Alert, Paper } from '@mui/material';

        interface FormData {
          name: string;
          email: string;
          message: string;
        }

        const { register, handleSubmit, formState: { errors }, reset } = useForm&lt;FormData&gt;();
      </example>
    </step>
    <step order="2">
      <action>Create form submission hook</action>
      <file>src/hooks/useFormSubmit.ts</file>
      <details>
        - Handle submission logic
        - Call localStorage service on submit
        - Manage success state
        - Return submit handler and success state
      </details>
    </step>
  </phase>

  <phase name="Submissions List">
    <step order="1">
      <action>Create submissions list component with MUI</action>
      <file>src/components/SubmissionsList.tsx</file>
      <details>
        - Import MUI components: Card, CardContent, Typography, IconButton, Button, Grid, Box
        - Import DeleteIcon from @mui/icons-material
        - Display all saved submissions from localStorage
        - Use MUI Card for each submission
        - Use MUI Grid for responsive layout
        - Show submission details using MUI Typography
        - Add MUI IconButton with DeleteIcon for each submission
        - Add MUI Button for clear all functionality
        - Show empty state using MUI Typography when no submissions
        - Format dates with JavaScript Intl.DateTimeFormat
      </details>
    </step>
  </phase>

  <phase name="App Integration">
    <step order="1">
      <action>Update App.tsx with MUI layout</action>
      <file>src/App.tsx</file>
      <details>
        - Import MUI components: Container, AppBar, Toolbar, Typography, Box, Chip
        - Import and render InputForm component
        - Import and render SubmissionsList component
        - Create MUI AppBar with app title
        - Use MUI Container for main content layout
        - Use state to trigger list refresh after new submission
        - Add offline indicator using MUI Chip
      </details>
    </step>
    <step order="2">
      <action>Add offline indicator hook</action>
      <file>src/hooks/useOnlineStatus.ts</file>
      <details>
        - Detect online/offline status using navigator.onLine
        - Listen to online/offline events
        - Return boolean online status
        - Used to show MUI Chip indicator in App.tsx
      </details>
    </step>
  </phase>

  <phase name="Testing and Build">
    <step order="1">
      <action>Test PWA functionality</action>
      <command>npm run build && npm run preview</command>
      <details>
        - Verify service worker registration
        - Test offline functionality
        - Check manifest is loaded correctly
        - Validate installability
      </details>
    </step>
    <step order="2">
      <action>Test form and storage</action>
      <details>
        - Submit form with valid data
        - Verify data appears in submissions list
        - Verify data persists after page refresh
        - Test delete functionality
        - Test clear all functionality
        - Test validation messages
        - Test offline submission works
      </details>
    </step>
  </phase>

  <file_structure>
    <directory name="src">
      <directory name="components">
        <file>InputForm.tsx</file>
        <file>SubmissionsList.tsx</file>
      </directory>
      <directory name="services">
        <file>storage.ts</file>
      </directory>
      <directory name="hooks">
        <file>useFormSubmit.ts</file>
        <file>useOnlineStatus.ts</file>
      </directory>
      <directory name="theme">
        <file>theme.ts</file>
      </directory>
      <file>App.tsx</file>
      <file>main.tsx</file>
      <file>vite-env.d.ts</file>
    </directory>
    <directory name="public">
      <file>pwa-192x192.png</file>
      <file>pwa-512x512.png</file>
    </directory>
    <file>index.html</file>
    <file>vite.config.ts</file>
    <file>tsconfig.json</file>
    <file>package.json</file>
  </file_structure>

  <benefits>
    <item>No backend or cloud services required</item>
    <item>Works completely offline</item>
    <item>Data persists across browser sessions</item>
    <item>No API keys or credentials to manage</item>
    <item>Simple to deploy as static site</item>
    <item>Fast - no network latency for storage operations</item>
    <item>Professional UI with Material-UI components</item>
    <item>Simplified form handling with react-hook-form</item>
    <item>Built-in form validation with minimal code</item>
    <item>Responsive design out of the box with MUI Grid</item>
    <item>Accessible UI components following WAI-ARIA standards</item>
  </benefits>

  <limitations>
    <item>Data is stored per-browser, not synced across devices</item>
    <item>Storage limit ~5-10MB depending on browser</item>
    <item>User can clear data via browser settings</item>
    <item>No server-side validation or processing</item>
  </limitations>

  <notes>
    <note priority="medium">
      Consider using IndexedDB instead of localStorage for larger datasets
      or more complex querying needs.
    </note>
    <note priority="low">
      Add export/import functionality to allow users to backup their data.
    </note>
  </notes>
</plan>
